<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">

  <style>
body {background-color: black;}
    .menu {
      display: flex;
      justify-content: center;
      align-items: center;

      height: 100vh;
    }

    .menu h1 {
      font-size: 36px;
      margin: 0;
    }

    .menu button {
      font-size: 24px;
      padding: 10px 20px;
      margin: 20px;
    }

    #gameContainer {
      width: 1000px;
      height: 500x;
      border: 1px solid whitesmoke;
    }
  </style>
</head>

<body>

  <h1></h1>
  <div class="menu">
    <h1 style=color:white>Ping Pong</h1>
    <!-- Bouton pour démarrer le jeu -->
    <button onclick="StartGame()">Démarrer</button>
    <!-- Bouton pour afficher les règles -->
    <button onclick="showconfig()">Config</button>
    
  </div>
  <div id="gameContainer"></div>
  <script>
    let points = 0;
    let time = 0;
    let speed = 1;
    let timem = 0
    let timesm = 0
    function showconfig(params) {
      
    }
    function StartGame() {
      document.querySelector(".menu").style.display = "none";
      var elementD = document.getElementById('gameContainer');
      console.log(elementD.style)
      console.log(elementD.style.width)
      elementD.style.height = 1000
      
      elementD.style.width = 500
          //   <div id="gameContainer"></div>
    // Set up the canvas

    const canvas = document.createElement("canvas");
    const ctx = canvas.getContext("2d");
    canvas.width = 1000;
    canvas.height = 600;

    document.getElementById("gameContainer").appendChild(canvas);

    // Set up the ball
    let x = canvas.width / 2;
    let y = canvas.height - 30;
    let dx = 5;
    let dy = -5;
    let dd = 0;
    let ballRadius = 13.3;

    // Set up the paddles
    let Boots = false
    let paddleHeight = 11;
    let paddleWidth = 100;
    let paddleX = (canvas.width - paddleWidth) / 2;
    let rightPressed = false;
    let leftPressed = false;

    // Handle keyboard input
    document.addEventListener("keydown", keyDownHandler, false);
    document.addEventListener("keyup", keyUpHandler, false);

    function keyDownHandler(e) {
      if (e.key === "b") {
        Boots = true;
      }
      if (e.key === "a") {
        leftPressed = true;
      } else if (e.key === "d") {
        rightPressed = true;
      }
      if (e.key == "Right" || e.key == "ArrowRight") {
        rightPressed = true;
      } else if (e.key == "Left" || e.key == "ArrowLeft") {
        leftPressed = true;
      }
    }

    function keyUpHandler(e) {
      if (e.key === "b") {
        Boots = false;
      }
      if (e.key === "a") {
        leftPressed = false;
      } else if (e.key === "d") {
        rightPressed = false;
      }
      if (e.key == "Right" || e.key == "ArrowRight") {
        rightPressed = false;
      } else if (e.key == "Left" || e.key == "ArrowLeft") {
        leftPressed = false;
      }
    }
    // Draw everything on the canvas
    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Draw the ball
      ctx.beginPath();
      ctx.arc(x, y, ballRadius, 0, Math.PI * 2);
      ctx.fillStyle = "#0095DD";
      ctx.fill();

      // Move the ball
      if (x + dx > canvas.width - ballRadius || x + dx < ballRadius) {
        dx = (-dx - dd);
        dy = dy + dd;
      }
      x += dx + dd;
      y += dy + -dd;
      //x += Math.floor(Math.random() * x + dx > canvas.width - ballRadius || x + dx < ballRadius ? (Math.floor(Math.random() * 7) + 3):1) + dx;
      //y += Math.floor(Math.random() * x + dx > canvas.width - ballRadius || x + dx < ballRadius ? (Math.floor(Math.random() * 7) + 3):1) + dy;
      ctx.fillText(`x: ${x} dx: ${dx} y: ${y} dy: ${dy}`, 200, 90)
      ctx.closePath();
      switch (points) {
        case 60:
          /*
          setInterval(function name(params) {
            var elementD = document.getElementById('gameContainer');
          elementD.style.width = 0
          elementD.style.height = 0
          let script = document.createElement("img");
          let Random = ["a", "b"]
          let mathh = (Math.floor(Math.random() * 2))
          script.setAttribute("src", `C:/Users/lukvaillancourt/Downloads/node-v18.12.1-win-x64/node-v18.12.1-win-x64/htpp/Image/${Random[mathh]}.jpg`);
          script.setAttribute("width", "20");
          script.setAttribute("height", "20");
          document.body.insertBefore(script, document.getElementById("h1"));
          ballRadius = 0; dy = 0; y = 0; x = 0; dx = 0;
          }, 100)
           */

          elementD.style.width = 0
          elementD.style.height = 0
          let script = document.createElement("img");
          script.setAttribute("src", `C:/Users/lukvaillancourt/Downloads/node-v18.12.1-win-x64/node-v18.12.1-win-x64/htpp/Image/a.jpg`);
          script.setAttribute("width", "1000");
          script.setAttribute("height", "1000");
          document.body.insertBefore(script, document.getElementById("h1"));
          return;

        default:
          break;
      }
      // Bounce the ball off the walls
      if (-1 + y + dy < ballRadius) {
        dy = -dy + dd;
        dx = dx + dd
      } else if (y + dy > canvas.height - ballRadius) {
        if (x > paddleX && x < paddleX + paddleWidth) {
          dy = Math.floor(Math.random() * -dy - dd);
          points++
          dx++; dd++
        } else {// Game over

          document.location.reload();
        }
      }

      // Draw the paddle
      ctx.font = "16px Arial";
      ctx.fillStyle = "#0095DD";
      ctx.fillText("Points: " + points, 8, 20);
      ctx.font = "16px Arial";
      ctx.fillStyle = "#0095DD";
      ctx.fillText(`${time}s`, 200, 20);
      ctx.font = "16px Arial";
      ctx.fillStyle = "#0095DD";
      ctx.fillText(`${timesm}ms`, 200, 40);
      ctx.beginPath();
      ctx.rect(paddleX, canvas.height - paddleHeight, paddleWidth, paddleHeight);
      ctx.fillStyle = "#0095DD";
      ctx.fill();
      ctx.closePath();

      // Move the paddle if necessary
      if (rightPressed && paddleX < canvas.width - paddleWidth) {
        if (Boots == true) paddleX += 20;
        paddleX += 7;
      } else if (leftPressed && paddleX > 0) {
        if (Boots == true) paddleX -= 20;
        paddleX -= 7;
      }

      requestAnimationFrame(draw);
    }
    function timeset(params) {
      time += 1
    }
    function timeMset(params) {
      if (timem == 100) {
        timesm += 1; timem = 0
      }
      timem += 1
    }
    function addSpeed(params) {

    }
    draw()
    // Call the draw function every 10 milliseconds
    setInterval(addSpeed, (10 * 1000));
    setInterval(timeMset, 1);
    setInterval(timeset, 1000);
    //setInterval(draw, 10);
    }
  </script>
</body>

</html>
